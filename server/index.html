<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <style>
    #consoleOutput {
      font-family: monospace;
      background: #111;
      color: white;
      padding: 15px;
      border-radius: 8px;
    }
    .log { color: #ccc; }
    .info { color: #4da6ff; }
    .warn { color: #ffae42; }
    .error { color: #ff4d4d; }
  </style>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Try HiveMQ MQTT browser client ‚Äì a websocket client that you can use to experiment with publishing and subscribing MQTT messages over port 8000">
    <title>MQTT Websocket Client</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
</head>
<body class="notconnected">
<div id="header">
    <div>
        <a href="https://www.hivemq.com"><img id="headerlogo" src="assets/hivemq-logo.svg" alt"HiveMQ Logo" title="HiveMQ" style="width: 275px; height: 65px"></a>
        <span id="headertitle">Websockets Client Showcase</span>
    </div>
</div>
<div id="content" class="row">
<div id="connection" class="row large-12 columns">

    <div class="large-8 columns conniTop">
        <h3>Connection</h3>
    </div>

    <div class="large-1 columns conniStatus">
        <div id="connectionStatus"></div>
    </div>

    <div class="large-2 columns conniArrow">
        <a class="small bottom conniArrow" onclick="websocketclient.render.toggle('conni');">
            <div class="icon-arrow-chevron"></div>
        </a>
    </div>
    <div class="large-12 columns" id="conniMain">
        <div class="panel">
            <h1 id="connection-status">No conectado</h1>
        </div>
    </div>
</div>

<div id="publish-sub" class="row large-12 columns">
    <div class="columns large-8">
       

        

     
        <div class="large-9 columns messagesTop">
            <h1>Messages</h1>
            <h3 id="msgBox"></h3>
        </div>

      


        </div>
    </div>
<h2 id="consoleOutput">üñ• Consola:</h2>

<script>
  const output = document.getElementById("consoleOutput");

  function write(type, args) {
    const message = Array.from(args).map(arg =>
      typeof arg === "object"
        ? JSON.stringify(arg, null, 2)
        : arg
    ).join(" ");

    const line = document.createElement("div");
    line.className = type;
    line.textContent = `[${type.toUpperCase()}] ${message}`;
    output.appendChild(line);
  }

  ["log", "info", "warn", "error"].forEach(type => {
    const original = console[type];
    console[type] = function(...args) {
      original.apply(console, args);
      write(type, args);
    };
  });

  // Capturar errores globales
  window.onerror = function(message, source, lineno, colno, error) {
    console.error(message);
  };

  // PRUEBAS
  console.log("Mensaje normal");
  console.info("Informaci√≥n");
  console.warn("Advertencia");
  console.error("Error cr√≠tico");
</script>
    
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/1.3.1/lodash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/4.2.3/js/foundation.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/4.2.3/js/foundation/foundation.forms.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.1.0/moment.min.js"></script>
<script src="mqttws31.js"></script>

<script src="app.js"></script>

<script>

    function randomString(length) {
        var text = "";
        var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
        for (var i = 0; i < length; i++)
            text += possible.charAt(Math.floor(Math.random() * possible.length));
        return text;
    }

    $(document).foundation();
    $(document).ready(function () {

        $('#clientIdInput').val('clientId-' + randomString(10));

      

        $("#addSubButton").fancybox({
            'afterShow': function () {
                var rndColor = websocketclient.getRandomColor();
                $("#colorChooser").minicolors('value', rndColor);
            }
        });

        websocketclient.render.toggle('publish');
        websocketclient.render.toggle('messages');
        websocketclient.render.toggle('sub');
    });
</script>
</body>
</html>
